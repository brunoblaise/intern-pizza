{"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\server.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\server.js","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":1,"column":34}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":21}},"2":{"start":{"line":3,"column":15},"end":{"line":3,"column":34}},"3":{"start":{"line":4,"column":13},"end":{"line":4,"column":37}},"4":{"start":{"line":5,"column":11},"end":{"line":5,"column":36}},"5":{"start":{"line":15,"column":0},"end":{"line":15,"column":18}},"6":{"start":{"line":17,"column":0},"end":{"line":25,"column":3}},"7":{"start":{"line":18,"column":2},"end":{"line":24,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":21,"column":7}},"9":{"start":{"line":23,"column":4},"end":{"line":23,"column":30}},"10":{"start":{"line":26,"column":0},"end":{"line":26,"column":21}},"11":{"start":{"line":27,"column":0},"end":{"line":29,"column":3}},"12":{"start":{"line":28,"column":2},"end":{"line":28,"column":52}},"13":{"start":{"line":30,"column":0},"end":{"line":30,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":17,"column":13},"end":{"line":17,"column":14}},"loc":{"start":{"line":17,"column":33},"end":{"line":25,"column":1}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":17},"end":{"line":27,"column":18}},"loc":{"start":{"line":27,"column":23},"end":{"line":29,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":37}},"type":"binary-expr","locations":[{"start":{"line":4,"column":13},"end":{"line":4,"column":29}},{"start":{"line":4,"column":33},"end":{"line":4,"column":37}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":1},"f":{"0":0,"1":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"names":["express","require","app","server","PORT","process","env","db","authenticate","get","req","res","status","json","greeting","err","send","use","listen","console","log","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst app = express();\r\nconst server = require('./app.js');\r\n\r\nconst PORT = process.env.PORT || 5000;\r\nconst db = require('./src/db/db.js');\r\n\r\n//FIXME: the problem of test not getting the url\r\n//FIXME: gmail in services throwing error\r\n\r\n//FIXME: test not working\r\n//TODO: add more tests\r\n\r\n//NOTE:\r\n\r\ndb.authenticate();\r\n//db.sync();\r\napp.get('/', async (req, res) => {\r\n\ttry {\r\n\t\tres.status(200).json({ greeting: 'Hello there!' });\r\n\t} catch (err) {\r\n\t\tres.status(500).send(err);\r\n\t}\r\n});\r\napp.use('/', server);\r\n\r\napp.listen(PORT, () => {\r\n\tconsole.log(`Server is running on port ${PORT}.`);\r\n});\r\n\r\nmodule.exports = app;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGF,OAAO,CAAC,CAAC;AACrB,MAAMG,MAAM,GAAGF,OAAO,CAAC,UAAU,CAAC;AAElC,MAAMG,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AACrC,MAAMG,EAAE,GAAGN,OAAO,CAAC,gBAAgB,CAAC;;AAEpC;AACA;;AAEA;AACA;;AAEA;;AAEAM,EAAE,CAACC,YAAY,CAAC,CAAC;AACjB;AACAN,GAAG,CAACO,GAAG,CAAC,GAAG,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAChC,IAAI;IACHA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,QAAQ,EAAE;IAAe,CAAC,CAAC;EACnD,CAAC,CAAC,OAAOC,GAAG,EAAE;IACbJ,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACI,IAAI,CAACD,GAAG,CAAC;EAC1B;AACD,CAAC,CAAC;AACFb,GAAG,CAACe,GAAG,CAAC,GAAG,EAAEd,MAAM,CAAC;AAEpBD,GAAG,CAACgB,MAAM,CAACd,IAAI,EAAE,MAAM;EACtBe,OAAO,CAACC,GAAG,CAAE,6BAA4BhB,IAAK,GAAE,CAAC;AAClD,CAAC,CAAC;AAEFiB,MAAM,CAACC,OAAO,GAAGpB,GAAG"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"233a6097d786d90d8df9a48e3a9ad650a803d989","contentHash":"d84a13024e17a110fdc3ffff38c222cf1476a9884c2ee8395a9669396d785184"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\app.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\app.js","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":1,"column":34}},"1":{"start":{"line":2,"column":13},"end":{"line":2,"column":28}},"2":{"start":{"line":3,"column":15},"end":{"line":3,"column":32}},"3":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":50}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":24}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":58}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":67}},"10":{"start":{"line":14,"column":0},"end":{"line":16,"column":4}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":16}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":23}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":18}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":21}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["express","require","cors","morgan","app","Router","errors","swaggerUi","swaggerJson","use","json","serve","setup","urlencoded","extended","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\","sources":["app.js"],"sourcesContent":["const express = require('express');\r\nconst cors = require('cors');\r\nconst morgan = require('morgan');\r\nconst app = express.Router();\r\nconst { errors } = require('celebrate');\r\nconst swaggerUi = require('swagger-ui-express');\r\nconst swaggerJson = require('./docs/swagger.json');\r\napp.use(express.json());\r\n\r\napp.use('/api/v1', require('./src/api/v1/routers/index'));\r\n\r\napp.use('/swagger', swaggerUi.serve, swaggerUi.setup(swaggerJson));\r\n//console.log('All models were synchronized successfully.');\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cors());\r\napp.use(morgan('dev'));\r\napp.use(errors());\r\n\r\nmodule.exports = app;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMG,GAAG,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;AAC5B,MAAM;EAAEC;AAAO,CAAC,GAAGL,OAAO,CAAC,WAAW,CAAC;AACvC,MAAMM,SAAS,GAAGN,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAMO,WAAW,GAAGP,OAAO,CAAC,qBAAqB,CAAC;AAClDG,GAAG,CAACK,GAAG,CAACT,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC;AAEvBN,GAAG,CAACK,GAAG,CAAC,SAAS,EAAER,OAAO,CAAC,4BAA4B,CAAC,CAAC;AAEzDG,GAAG,CAACK,GAAG,CAAC,UAAU,EAAEF,SAAS,CAACI,KAAK,EAAEJ,SAAS,CAACK,KAAK,CAACJ,WAAW,CAAC,CAAC;AAClE;AACAJ,GAAG,CAACK,GAAG,CAACT,OAAO,CAACa,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDV,GAAG,CAACK,GAAG,CAACP,IAAI,CAAC,CAAC,CAAC;AACfE,GAAG,CAACK,GAAG,CAACN,MAAM,CAAC,KAAK,CAAC,CAAC;AACtBC,GAAG,CAACK,GAAG,CAACH,MAAM,CAAC,CAAC,CAAC;AAEjBS,MAAM,CAACC,OAAO,GAAGZ,GAAG"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"965af91f9efd2b7d87b3e39cce47ca18c4fab036","contentHash":"ac98e909fa08d515d85cee61737b15bc54cf557ea958b0a710615be2d0955579"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\index.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\index.js","statementMap":{"0":{"start":{"line":1,"column":13},"end":{"line":1,"column":36}},"1":{"start":{"line":2,"column":14},"end":{"line":2,"column":38}},"2":{"start":{"line":3,"column":14},"end":{"line":3,"column":38}},"3":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"4":{"start":{"line":5,"column":15},"end":{"line":5,"column":31}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["user","require","pizza","order","express","router","Router","use","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\","sources":["index.js"],"sourcesContent":["const user = require('./user.route');\r\nconst pizza = require('./pizza.route');\r\nconst order = require('./order.route');\r\nconst express = require('express');\r\nconst router = express.Router();\r\n\r\nrouter.use('/auth', user);\r\nrouter.use('/pizza', pizza);\r\nrouter.use('/order', order);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,cAAc,CAAC;AACpC,MAAMC,KAAK,GAAGD,OAAO,CAAC,eAAe,CAAC;AACtC,MAAME,KAAK,GAAGF,OAAO,CAAC,eAAe,CAAC;AACtC,MAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMI,MAAM,GAAGD,OAAO,CAACE,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,GAAG,CAAC,OAAO,EAAEP,IAAI,CAAC;AACzBK,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEL,KAAK,CAAC;AAC3BG,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEJ,KAAK,CAAC;AAE3BK,MAAM,CAACC,OAAO,GAAGJ,MAAM"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4249633b8b4d6f3b8dedcfb1620db436903f6f9c","contentHash":"8c276c65cf7bd523427076c42ec0871aa35c3681dfe3dae36a488c2edcff015d"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\user.route.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\user.route.js","statementMap":{"0":{"start":{"line":1,"column":15},"end":{"line":1,"column":42}},"1":{"start":{"line":2,"column":15},"end":{"line":2,"column":63}},"2":{"start":{"line":3,"column":14},"end":{"line":3,"column":61}},"3":{"start":{"line":4,"column":22},"end":{"line":4,"column":79}},"4":{"start":{"line":5,"column":23},"end":{"line":5,"column":79}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":45}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["router","require","Router","signup","login","SignValidator","LoginValidator","post","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\","sources":["user.route.js"],"sourcesContent":["const router = require('express').Router();\r\nconst signup = require('../controllers/user-signup.controller');\r\nconst login = require('../controllers/user-login.controller');\r\nconst SignValidator = require('../../../validators/post/user-signup.validator');\r\nconst LoginValidator = require('../../../validators/post/user-login.validator');\r\nrouter.post('/signup', SignValidator, signup);\r\nrouter.post('/login', LoginValidator, login);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAS,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1C,MAAMC,MAAM,GAAGF,OAAO,CAAC,uCAAuC,CAAC;AAC/D,MAAMG,KAAK,GAAGH,OAAO,CAAC,sCAAsC,CAAC;AAC7D,MAAMI,aAAa,GAAGJ,OAAO,CAAC,gDAAgD,CAAC;AAC/E,MAAMK,cAAc,GAAGL,OAAO,CAAC,+CAA+C,CAAC;AAC/ED,MAAM,CAACO,IAAI,CAAC,SAAS,EAAEF,aAAa,EAAEF,MAAM,CAAC;AAC7CH,MAAM,CAACO,IAAI,CAAC,QAAQ,EAAED,cAAc,EAAEF,KAAK,CAAC;AAE5CI,MAAM,CAACC,OAAO,GAAGT,MAAM"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"41da740b998bf68aa5252852eac0c0c98414784d","contentHash":"12f668aa33e117292e70ea9b1147941ab675e7b20f8bbc603580fae65655f53d"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\user-signup.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\user-signup.controller.js","statementMap":{"0":{"start":{"line":1,"column":15},"end":{"line":1,"column":32}},"1":{"start":{"line":2,"column":13},"end":{"line":2,"column":53}},"2":{"start":{"line":3,"column":17},"end":{"line":3,"column":51}},"3":{"start":{"line":4,"column":18},"end":{"line":4,"column":55}},"4":{"start":{"line":5,"column":0},"end":{"line":54,"column":2}},"5":{"start":{"line":6,"column":2},"end":{"line":53,"column":3}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":22}},"7":{"start":{"line":12,"column":4},"end":{"line":18,"column":5}},"8":{"start":{"line":13,"column":6},"end":{"line":17,"column":9}},"9":{"start":{"line":19,"column":17},"end":{"line":23,"column":6}},"10":{"start":{"line":24,"column":4},"end":{"line":28,"column":7}},"11":{"start":{"line":24,"column":14},"end":{"line":28,"column":7}},"12":{"start":{"line":29,"column":17},"end":{"line":29,"column":39}},"13":{"start":{"line":30,"column":21},"end":{"line":30,"column":48}},"14":{"start":{"line":31,"column":20},"end":{"line":35,"column":6}},"15":{"start":{"line":36,"column":4},"end":{"line":36,"column":148}},"16":{"start":{"line":39,"column":4},"end":{"line":44,"column":7}},"17":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"18":{"start":{"line":47,"column":4},"end":{"line":51,"column":7}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"loc":{"start":{"line":5,"column":49},"end":{"line":54,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":18,"column":5}},{"start":{"line":12,"column":4},"end":{"line":18,"column":5}}],"line":12},"1":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":32}},"type":"binary-expr","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":13}},{"start":{"line":12,"column":17},"end":{"line":12,"column":23}},{"start":{"line":12,"column":27},"end":{"line":12,"column":32}}],"line":12},"2":{"loc":{"start":{"line":24,"column":4},"end":{"line":28,"column":7}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":28,"column":7}},{"start":{"line":24,"column":4},"end":{"line":28,"column":7}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"f":{"0":1},"b":{"0":[0,1],"1":[1,1,1],"2":[0,0]},"inputSourceMap":{"version":3,"names":["bcrypt","require","User","sendMail","timeStamp","module","exports","req","res","next","name","email","hash","body","status","json","msg","STATUS","time","user","findOne","where","salt","genSaltSync","password","hashSync","newUser","create","data","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["user-signup.controller.js"],"sourcesContent":["const bcrypt = require('bcrypt');\r\nconst User = require('../../../db/models/user.model');\r\nconst sendMail = require('../../../services/gmail');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst { name, email, hash } = await req.body;\r\n\t\tif (!name || !email || !hash) {\r\n\t\t\treturn res.status(400).json({ msg: 'Please enter all fields', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\t\tconst user = await User.findOne({ where: { email } });\r\n\r\n\t\tif (user) return res.status(400).json({ msg: 'User already exists', STATUS: 400, time: timeStamp() });\r\n\r\n\t\tconst salt = bcrypt.genSaltSync(10);\r\n\t\tconst password = bcrypt.hashSync(hash, salt);\r\n\r\n\t\tconst newUser = await User.create({\r\n\t\t\tname,\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t});\r\n\t\tsendMail(\r\n\t\t\temail,\r\n\t\t\t'Welcome to the to world best place place',\r\n\t\t\t`Welcome  ${name} to the world best place place you can start by ordering a pizza`,\r\n\t\t);\r\n\t\t//const token = jwtGenerator(newUser.id, newUser.role);\r\n\t\t//TODO: create a resuble function to pass for the staus data time and many others\r\n\t\tres.status(201).json({ STATUS: 201, msg: 'User created', time: timeStamp(), data: newUser });\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,IAAI,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AACrD,MAAME,QAAQ,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AACnD,MAAMG,SAAS,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AACvDI,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAM;MAAEC,IAAI;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAG,MAAML,GAAG,CAACM,IAAI;IAC5C,IAAI,CAACH,IAAI,IAAI,CAACC,KAAK,IAAI,CAACC,IAAI,EAAE;MAC7B,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEd,SAAS,CAAC;MAAE,CAAC,CAAC;IAChG;IACA,MAAMe,IAAI,GAAG,MAAMjB,IAAI,CAACkB,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEV;MAAM;IAAE,CAAC,CAAC;IAErD,IAAIQ,IAAI,EAAE,OAAOX,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,qBAAqB;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;IAErG,MAAMkB,IAAI,GAAGtB,MAAM,CAACuB,WAAW,CAAC,EAAE,CAAC;IACnC,MAAMC,QAAQ,GAAGxB,MAAM,CAACyB,QAAQ,CAACb,IAAI,EAAEU,IAAI,CAAC;IAE5C,MAAMI,OAAO,GAAG,MAAMxB,IAAI,CAACyB,MAAM,CAAC;MACjCjB,IAAI;MACJC,KAAK;MACLa;IACD,CAAC,CAAC;IACFrB,QAAQ,CACPQ,KAAK,EACL,0CAA0C,EACzC,YAAWD,IAAK,kEAClB,CAAC;IACD;IACA;IACAF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAED,GAAG,EAAE,cAAc;MAAEE,IAAI,EAAEd,SAAS,CAAC,CAAC;MAAEwB,IAAI,EAAEF;IAAQ,CAAC,CAAC;EAC7F,CAAC,CAAC,OAAOG,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BvB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACoB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"58790c4ba8d86fc9c8bcb4ae3758e597b1015c0e","contentHash":"347ba112d4fdb1016fd95cfa2f9857f3f8249e8928ba38cffb378170dd0ef971"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\user.model.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\user.model.js","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":24}},"1":{"start":{"line":4,"column":11},"end":{"line":4,"column":30}},"2":{"start":{"line":5,"column":13},"end":{"line":29,"column":2}},"3":{"start":{"line":30,"column":0},"end":{"line":30,"column":22}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["DataTypes","require","db","User","define","id","type","INTEGER","primaryKey","autoIncrement","role","STRING","allowNull","defaultValue","name","email","unique","password","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\","sources":["user.model.js"],"sourcesContent":["const { DataTypes } = require('sequelize');\r\nconst db = require('../db.js');\r\n\r\nconst User = db.define('user', {\r\n\tid: {\r\n\t\ttype: DataTypes.INTEGER,\r\n\t\tprimaryKey: true,\r\n\t\tautoIncrement: true,\r\n\t},\r\n\trole: { type: DataTypes.STRING, allowNull: false, defaultValue: 'user' },\r\n\tname: { type: DataTypes.STRING, allowNull: false },\r\n\temail: { type: DataTypes.STRING, allowNull: false, unique: true },\r\n\tpassword: { type: DataTypes.STRING, allowNull: false },\r\n\t\r\n});\r\n\r\nmodule.exports = User;\r\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,EAAE,GAAGD,OAAO,CAAC,UAAU,CAAC;AAE9B,MAAME,IAAI,GAAGD,EAAE,CAACE,MAAM,CAAC,MAAM,EAAE;EAC9BC,EAAE,EAAE;IACHC,IAAI,EAAEN,SAAS,CAACO,OAAO;IACvBC,UAAU,EAAE,IAAI;IAChBC,aAAa,EAAE;EAChB,CAAC;EACDC,IAAI,EAAE;IAAEJ,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE,KAAK;IAAEC,YAAY,EAAE;EAAO,CAAC;EACxEC,IAAI,EAAE;IAAER,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE;EAAM,CAAC;EAClDG,KAAK,EAAE;IAAET,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE,KAAK;IAAEI,MAAM,EAAE;EAAK,CAAC;EACjEC,QAAQ,EAAE;IAAEX,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE;EAAM;AAEtD,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAGhB,IAAI"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d0fa0902cfc322d21a12dd4ae3e6799455b74ea7","contentHash":"ceaac1f12c3b9ef77dd888fbacbe30adeb2e75c648c395537e9a1f5661bd0f0c"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\db.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\db.js","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":24}},"2":{"start":{"line":5,"column":15},"end":{"line":5,"column":41}},"3":{"start":{"line":6,"column":13},"end":{"line":6,"column":60}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":46}},"6":{"start":{"line":10,"column":18},"end":{"line":10,"column":72}},"7":{"start":{"line":11,"column":11},"end":{"line":23,"column":2}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":20}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["require","config","Sequelize","conf","proConfig","testConfig","devConfig","db","process","env","DB_URL","dialect","dialectOptions","ssl","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\","sources":["db.js"],"sourcesContent":["require('dotenv').config();\r\nconst { Sequelize } = require('sequelize');\r\nconst config = require('../utils/config');\r\nconst conf = `postgres:${config('password')}@localhost:5432`;\r\n\r\nconst proConfig = config('production.db_url');\r\n\r\nconst testConfig = config('production.db_url'); /* `postgres://${conf}/${config('test.database')}` */\r\n\r\nconst devConfig = `postgres://${conf}/${config('development.database')}`;\r\n\r\nconst db = new Sequelize(\r\n\tprocess.env.DB_URL,\r\n\t/* \tprocess.env.NODE_ENV === 'production'\r\n\t\t? proConfig\r\n\t\t: process.env.NODE_ENV === 'test'\r\n\t\t? testConfig\r\n\t\t: devConfig, */\r\n\t{\r\n\t\tdialect: 'postgres',\r\n\t\tdialectOptions: {\r\n\t\t\tssl: true,\r\n\t\t\t/* process.env.NODE_ENV === 'production' ? true : false, */\r\n\t\t},\r\n\t},\r\n);\r\n/* \t'postgres://noevone94:QtSzmfe82MLX@ep-round-brook-21911542-pooler.us-east-2.aws.neon.tech/neondb',\r\n\t\t\t{\r\n\t\t\t\tdialect: 'postgres',\r\n\t\t\t\tdialectOptions: {\r\n\t\t\t\t\tssl: true,\r\n\t\t\t\t},\r\n\t\t\t}, */\r\nmodule.exports = db;\r\n"],"mappings":"AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1B,MAAM;EAAEC;AAAU,CAAC,GAAGF,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,MAAM,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AACzC,MAAMG,IAAI,GAAI,YAAWF,MAAM,CAAC,UAAU,CAAE,iBAAgB;AAE5D,MAAMG,SAAS,GAAGH,MAAM,CAAC,mBAAmB,CAAC;AAE7C,MAAMI,UAAU,GAAGJ,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC;;AAEhD,MAAMK,SAAS,GAAI,cAAaH,IAAK,IAAGF,MAAM,CAAC,sBAAsB,CAAE,EAAC;AAExE,MAAMM,EAAE,GAAG,IAAIL,SAAS,CACvBM,OAAO,CAACC,GAAG,CAACC,MAAM;AAClB;AACD;AACA;AACA;AACA;AACC;EACCC,OAAO,EAAE,UAAU;EACnBC,cAAc,EAAE;IACfC,GAAG,EAAE;IACL;EACD;AACD,CACD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAM,CAACC,OAAO,GAAGR,EAAE"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5defd3f15e8e1f945cbde6bf196e648f7362608e","contentHash":"d8c427516720a60fc8a07ccfd07b3e18bed621e219b00ff7493ae5c052d7bb8c"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\config.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\config.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"1":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"loc":{"start":{"line":5,"column":38},"end":{"line":7,"column":1}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":4},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"names":["require","config","module","exports","paremeter","get"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\","sources":["config.js"],"sourcesContent":["\"use strict\";\r\nrequire('dotenv').config();\r\nconst config = require('config');\r\n\r\nmodule.exports = function (paremeter) {\r\n\treturn config.get(paremeter);\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1B,MAAMA,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhCE,MAAM,CAACC,OAAO,GAAG,UAAUC,SAAS,EAAE;EACrC,OAAOH,MAAM,CAACI,GAAG,CAACD,SAAS,CAAC;AAC7B,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"be2e33470acb9137f2654b9169773a8a1788e340","contentHash":"af627c0d51095479ce219a1a36a9f4ffa2e8839603b8bac6517541ce6c531aa7"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\services\\gmail.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\services\\gmail.js","statementMap":{"0":{"start":{"line":1,"column":19},"end":{"line":1,"column":40}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":25}},"2":{"start":{"line":5,"column":18},"end":{"line":5,"column":39}},"3":{"start":{"line":6,"column":22},"end":{"line":6,"column":47}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":68}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":83}},"7":{"start":{"line":10,"column":0},"end":{"line":12,"column":3}},"8":{"start":{"line":14,"column":2},"end":{"line":37,"column":3}},"9":{"start":{"line":15,"column":24},"end":{"line":15,"column":59}},"10":{"start":{"line":16,"column":22},"end":{"line":26,"column":6}},"11":{"start":{"line":27,"column":24},"end":{"line":32,"column":5}},"12":{"start":{"line":33,"column":19},"end":{"line":33,"column":56}},"13":{"start":{"line":34,"column":4},"end":{"line":34,"column":18}},"14":{"start":{"line":36,"column":4},"end":{"line":36,"column":17}},"15":{"start":{"line":39,"column":0},"end":{"line":39,"column":99}},"16":{"start":{"line":39,"column":26},"end":{"line":39,"column":54}},"17":{"start":{"line":39,"column":71},"end":{"line":39,"column":97}},"18":{"start":{"line":40,"column":0},"end":{"line":40,"column":26}}},"fnMap":{"0":{"name":"sendMail","decl":{"start":{"line":13,"column":15},"end":{"line":13,"column":23}},"loc":{"start":{"line":13,"column":46},"end":{"line":38,"column":1}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":39,"column":16},"end":{"line":39,"column":17}},"loc":{"start":{"line":39,"column":26},"end":{"line":39,"column":54}},"line":39},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":62},"end":{"line":39,"column":63}},"loc":{"start":{"line":39,"column":71},"end":{"line":39,"column":97}},"line":39}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":1},"f":{"0":1,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"names":["nodemailer","require","google","CLIENT_ID","process","env","CLEINT_SECRET","CLIENT_SECRET","REDIRECT_URI","REFRESH_TOKEN","oAuth2Client","auth","OAuth2","setCredentials","refresh_token","sendMail","email","subject","text","accessToken","getAccessToken","transport","createTransport","service","type","user","clientId","clientSecret","refreshToken","mailOptions","from","USER","to","result","error","then","console","log","catch","message","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\services\\","sources":["gmail.js"],"sourcesContent":["const nodemailer = require('nodemailer');\r\n\r\nconst { google } = require('googleapis');\r\n\r\nconst CLIENT_ID = process.env.CLIENT_ID;\r\nconst CLEINT_SECRET = process.env.CLIENT_SECRET;\r\nconst REDIRECT_URI = 'https://developers.google.com/oauthplayground';\r\nconst REFRESH_TOKEN = process.env.REFRESH_TOKEN;\r\nconst oAuth2Client = new google.auth.OAuth2(CLIENT_ID, CLEINT_SECRET, REDIRECT_URI);\r\n\r\noAuth2Client.setCredentials({ refresh_token: REFRESH_TOKEN });\r\nasync function sendMail(email, subject, text) {\r\n\ttry {\r\n\t\tconst accessToken = await oAuth2Client.getAccessToken();\r\n\r\n\t\tconst transport = nodemailer.createTransport({\r\n\t\t\tservice: 'gmail',\r\n\t\t\tauth: {\r\n\t\t\t\ttype: 'OAuth2',\r\n\t\t\t\tuser: 'brunoblaise94@gmail.com',\r\n\t\t\t\tclientId: CLIENT_ID,\r\n\t\t\t\tclientSecret: CLEINT_SECRET,\r\n\t\t\t\trefreshToken: REFRESH_TOKEN,\r\n\t\t\t\taccessToken: accessToken,\r\n\t\t\t},\r\n\t\t});\r\n\t\r\n\t\tconst mailOptions = {\r\n\t\t\tfrom: process.env.USER,\r\n\t\t\tto: email,\r\n\t\t\tsubject: subject,\r\n\t\t\ttext: text,\r\n\t\t};\r\n\r\n\t\tconst result = await transport.sendMail(mailOptions);\r\n\t\treturn result;\r\n\t} catch (error) {\r\n\t\treturn error;\r\n\t}\r\n}\r\nsendMail()\r\n\t.then((result) => console.log('Email sent...'))\r\n\t.catch((error) => console.log(error.message));\r\n\r\nmodule.exports = sendMail;\r\n"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AAExC,MAAM;EAAEC;AAAO,CAAC,GAAGD,OAAO,CAAC,YAAY,CAAC;AAExC,MAAME,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACF,SAAS;AACvC,MAAMG,aAAa,GAAGF,OAAO,CAACC,GAAG,CAACE,aAAa;AAC/C,MAAMC,YAAY,GAAG,+CAA+C;AACpE,MAAMC,aAAa,GAAGL,OAAO,CAACC,GAAG,CAACI,aAAa;AAC/C,MAAMC,YAAY,GAAG,IAAIR,MAAM,CAACS,IAAI,CAACC,MAAM,CAACT,SAAS,EAAEG,aAAa,EAAEE,YAAY,CAAC;AAEnFE,YAAY,CAACG,cAAc,CAAC;EAAEC,aAAa,EAAEL;AAAc,CAAC,CAAC;AAC7D,eAAeM,QAAQA,CAACC,KAAK,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAC7C,IAAI;IACH,MAAMC,WAAW,GAAG,MAAMT,YAAY,CAACU,cAAc,CAAC,CAAC;IAEvD,MAAMC,SAAS,GAAGrB,UAAU,CAACsB,eAAe,CAAC;MAC5CC,OAAO,EAAE,OAAO;MAChBZ,IAAI,EAAE;QACLa,IAAI,EAAE,QAAQ;QACdC,IAAI,EAAE,yBAAyB;QAC/BC,QAAQ,EAAEvB,SAAS;QACnBwB,YAAY,EAAErB,aAAa;QAC3BsB,YAAY,EAAEnB,aAAa;QAC3BU,WAAW,EAAEA;MACd;IACD,CAAC,CAAC;IAEF,MAAMU,WAAW,GAAG;MACnBC,IAAI,EAAE1B,OAAO,CAACC,GAAG,CAAC0B,IAAI;MACtBC,EAAE,EAAEhB,KAAK;MACTC,OAAO,EAAEA,OAAO;MAChBC,IAAI,EAAEA;IACP,CAAC;IAED,MAAMe,MAAM,GAAG,MAAMZ,SAAS,CAACN,QAAQ,CAACc,WAAW,CAAC;IACpD,OAAOI,MAAM;EACd,CAAC,CAAC,OAAOC,KAAK,EAAE;IACf,OAAOA,KAAK;EACb;AACD;AACAnB,QAAQ,CAAC,CAAC,CACRoB,IAAI,CAAEF,MAAM,IAAKG,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAAC,CAC9CC,KAAK,CAAEJ,KAAK,IAAKE,OAAO,CAACC,GAAG,CAACH,KAAK,CAACK,OAAO,CAAC,CAAC;AAE9CC,MAAM,CAACC,OAAO,GAAG1B,QAAQ"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0fc14bd020c264d8d62d8594841c1ac015bae3c8","contentHash":"dc656fd9be92e8e577982677bb5c532b889a59ff523fe819ab328a14d31c5604"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\timeStamp.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\timeStamp.js","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":6,"column":2}},"1":{"start":{"line":2,"column":20},"end":{"line":4,"column":4}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":19}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":17},"end":{"line":1,"column":18}},"loc":{"start":{"line":1,"column":29},"end":{"line":6,"column":1}},"line":1}},"branchMap":{},"s":{"0":1,"1":0,"2":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"names":["module","exports","timeStamp","Date","toLocaleString","timeZone"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\","sources":["timeStamp.js"],"sourcesContent":["module.exports = function () {\r\n\tconst timeStamp = new Date().toLocaleString('en-US', {\r\n\t\ttimeZone: 'Africa/Kigali',\r\n\t});\r\n\treturn timeStamp;\r\n};\r\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAG,YAAY;EAC5B,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;IACpDC,QAAQ,EAAE;EACX,CAAC,CAAC;EACF,OAAOH,SAAS;AACjB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7104127b9612db1ee55c335d310c0c18371f8735","contentHash":"80efa06121421d351b9fb8b670fa02f06ef510775c6043cde641beb4e240b4e3"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\user-login.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\user-login.controller.js","statementMap":{"0":{"start":{"line":1,"column":15},"end":{"line":1,"column":32}},"1":{"start":{"line":2,"column":21},"end":{"line":2,"column":61}},"2":{"start":{"line":3,"column":13},"end":{"line":3,"column":53}},"3":{"start":{"line":4,"column":18},"end":{"line":4,"column":55}},"4":{"start":{"line":5,"column":0},"end":{"line":50,"column":2}},"5":{"start":{"line":6,"column":2},"end":{"line":49,"column":3}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":22}},"7":{"start":{"line":11,"column":4},"end":{"line":17,"column":5}},"8":{"start":{"line":12,"column":6},"end":{"line":16,"column":9}},"9":{"start":{"line":18,"column":17},"end":{"line":22,"column":6}},"10":{"start":{"line":23,"column":4},"end":{"line":27,"column":7}},"11":{"start":{"line":23,"column":15},"end":{"line":27,"column":7}},"12":{"start":{"line":28,"column":20},"end":{"line":28,"column":65}},"13":{"start":{"line":29,"column":4},"end":{"line":33,"column":7}},"14":{"start":{"line":29,"column":18},"end":{"line":33,"column":7}},"15":{"start":{"line":34,"column":18},"end":{"line":34,"column":50}},"16":{"start":{"line":35,"column":4},"end":{"line":40,"column":7}},"17":{"start":{"line":42,"column":4},"end":{"line":42,"column":33}},"18":{"start":{"line":43,"column":4},"end":{"line":47,"column":7}},"19":{"start":{"line":48,"column":4},"end":{"line":48,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"loc":{"start":{"line":5,"column":49},"end":{"line":50,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":17,"column":5}},{"start":{"line":11,"column":4},"end":{"line":17,"column":5}}],"line":11},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"type":"binary-expr","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":14}},{"start":{"line":11,"column":18},"end":{"line":11,"column":27}}],"line":11},"2":{"loc":{"start":{"line":23,"column":4},"end":{"line":27,"column":7}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":27,"column":7}},{"start":{"line":23,"column":4},"end":{"line":27,"column":7}}],"line":23},"3":{"loc":{"start":{"line":29,"column":4},"end":{"line":33,"column":7}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":33,"column":7}},{"start":{"line":29,"column":4},"end":{"line":33,"column":7}}],"line":29}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"names":["bcrypt","require","jwtGenerator","User","timeStamp","module","exports","req","res","next","email","password","body","status","json","msg","STATUS","time","user","findOne","where","isMatch","compare","token","id","role","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["user-login.controller.js"],"sourcesContent":["const bcrypt = require('bcrypt');\r\nconst jwtGenerator = require('../../../helpers/jwtGenerator');\r\n\r\nconst User = require('../../../db/models/user.model');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst { email, password } = await req.body;\r\n\t\tif (!email || !password) {\r\n\t\t\treturn res.status(400).json({ msg: 'Please enter all fields', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\t\tconst user = await User.findOne({ where: { email } });\r\n\t\tif (!user) return res.status(400).json({ msg: 'User does not exist', STATUS: 400, time: timeStamp() });\r\n\t\tconst isMatch = await bcrypt.compare(password, user.password);\r\n\t\tif (!isMatch) return res.status(400).json({ msg: 'Invalid credentials', STATUS: 400, time: timeStamp() });\r\n\t\tconst token = jwtGenerator(user.id, user.role);\r\n\t\tres.status(200).json({ STATUS: 200, token, msg: 'Logged in', time: timeStamp() });\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,YAAY,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AAE7D,MAAME,IAAI,GAAGF,OAAO,CAAC,+BAA+B,CAAC;AACrD,MAAMG,SAAS,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AAEvDI,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAM;MAAEC,KAAK;MAAEC;IAAS,CAAC,GAAG,MAAMJ,GAAG,CAACK,IAAI;IAC1C,IAAI,CAACF,KAAK,IAAI,CAACC,QAAQ,EAAE;MACxB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEb,SAAS,CAAC;MAAE,CAAC,CAAC;IAChG;IACA,MAAMc,IAAI,GAAG,MAAMf,IAAI,CAACgB,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEV;MAAM;IAAE,CAAC,CAAC;IACrD,IAAI,CAACQ,IAAI,EAAE,OAAOV,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,qBAAqB;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEb,SAAS,CAAC;IAAE,CAAC,CAAC;IACtG,MAAMiB,OAAO,GAAG,MAAMrB,MAAM,CAACsB,OAAO,CAACX,QAAQ,EAAEO,IAAI,CAACP,QAAQ,CAAC;IAC7D,IAAI,CAACU,OAAO,EAAE,OAAOb,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,qBAAqB;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEb,SAAS,CAAC;IAAE,CAAC,CAAC;IACzG,MAAMmB,KAAK,GAAGrB,YAAY,CAACgB,IAAI,CAACM,EAAE,EAAEN,IAAI,CAACO,IAAI,CAAC;IAC9CjB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEO,KAAK;MAAER,GAAG,EAAE,WAAW;MAAEE,IAAI,EAAEb,SAAS,CAAC;IAAE,CAAC,CAAC;EAClF,CAAC,CAAC,OAAOsB,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BpB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEb,SAAS,CAAC;IAAE,CAAC,CAAC;IAE7EK,IAAI,CAACiB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c1e807571203dba64bf773ef5e8caa1f40276616","contentHash":"6fb9af8a4cd56c3ccb579a7dfdaf9714471bb6214e6931dfe0dbde2e29fcf9d8"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\jwtGenerator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\jwtGenerator.js","statementMap":{"0":{"start":{"line":1,"column":12},"end":{"line":1,"column":35}},"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"2":{"start":{"line":4,"column":18},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":2},"end":{"line":12,"column":5}},"4":{"start":{"line":14,"column":0},"end":{"line":14,"column":30}}},"fnMap":{"0":{"name":"jwtGenerator","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":21}},"loc":{"start":{"line":3,"column":32},"end":{"line":13,"column":1}},"line":3}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"names":["jwt","require","config","jwtGenerator","id","role","payload","user","sign","process","env","JWT_SECRET","expiresIn","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\","sources":["jwtGenerator.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\nrequire('dotenv').config();\r\n\r\nfunction jwtGenerator(id, role) {\r\n\tconst payload = {\r\n\t\tuser: {\r\n\t\t\tid,\r\n\t\t\trole,\r\n\t\t},\r\n\t};\r\n\r\n\treturn jwt.sign(payload, process.env.JWT_SECRET, { expiresIn: '2h' });\r\n}\r\n\r\nmodule.exports = jwtGenerator;\r\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1B,SAASC,YAAYA,CAACC,EAAE,EAAEC,IAAI,EAAE;EAC/B,MAAMC,OAAO,GAAG;IACfC,IAAI,EAAE;MACLH,EAAE;MACFC;IACD;EACD,CAAC;EAED,OAAOL,GAAG,CAACQ,IAAI,CAACF,OAAO,EAAEG,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;AACtE;AAEAC,MAAM,CAACC,OAAO,GAAGX,YAAY"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aef799a6cd9404c8635edbed21ea7922cddcd43a","contentHash":"6691156e578f19dacafa1d6bd0d80f0939618c6b45bf52a5a28ea8b5049697ac"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\user-signup.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\user-signup.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":12,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","BODY","name","string","required","email","hash","min","max"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\","sources":["user-signup.validator.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.BODY]: {\r\n\t\tname: Joi.string().required(),\r\n\t\temail: Joi.string().required().email(),\r\n\t\thash: Joi.string().min(8).max(15).required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,IAAI,GAAG;IAChBC,IAAI,EAAEL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC7BC,KAAK,EAAER,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IACtCC,IAAI,EAAET,GAAG,CAACM,MAAM,CAAC,CAAC,CAACI,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,EAAE,CAAC,CAACJ,QAAQ,CAAC;EAC5C;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b5a990981d720d91dcfa1c46b0ddcc967aa21476","contentHash":"9d4cb01dce115960683b9a7c98c312226f12a855af4ecac88d858000168d5a9d"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\user-login.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\user-login.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":11,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","BODY","email","string","required","password"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\","sources":["user-login.validator.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.BODY]: {\r\n\t\temail: Joi.string().required().email(),\r\n\t\tpassword: Joi.string().required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,IAAI,GAAG;IAChBC,KAAK,EAAEL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACF,KAAK,CAAC,CAAC;IACtCG,QAAQ,EAAER,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC;EACjC;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4fca3bfcb31a60eb2e3200310923822adb409805","contentHash":"4d29a3e2bf11971e69f73bf2d4f9a43af5e76564ddc2dd651ad46f51b731d8c3"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\pizza.route.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\pizza.route.js","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":1,"column":34}},"1":{"start":{"line":2,"column":15},"end":{"line":2,"column":31}},"2":{"start":{"line":3,"column":14},"end":{"line":3,"column":63}},"3":{"start":{"line":4,"column":13},"end":{"line":4,"column":42}},"4":{"start":{"line":5,"column":29},"end":{"line":5,"column":87}},"5":{"start":{"line":6,"column":13},"end":{"line":6,"column":60}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":52}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["express","require","router","Router","pizza","auth","pizzaCreateValidator","view","post","get","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\","sources":["pizza.route.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst pizza = require('../controllers/pizza-create.controller');\r\nconst auth = require('../middleware/auth');\r\nconst pizzaCreateValidator = require('../../../validators/post/pizza-create.validator');\r\nconst view = require('../controllers/pizza-view.controller');\r\n\r\nrouter.post('/', pizzaCreateValidator, auth, pizza);\r\nrouter.get('/view/', view);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,KAAK,GAAGH,OAAO,CAAC,wCAAwC,CAAC;AAC/D,MAAMI,IAAI,GAAGJ,OAAO,CAAC,oBAAoB,CAAC;AAC1C,MAAMK,oBAAoB,GAAGL,OAAO,CAAC,iDAAiD,CAAC;AACvF,MAAMM,IAAI,GAAGN,OAAO,CAAC,sCAAsC,CAAC;AAE5DC,MAAM,CAACM,IAAI,CAAC,GAAG,EAAEF,oBAAoB,EAAED,IAAI,EAAED,KAAK,CAAC;AACnDF,MAAM,CAACO,GAAG,CAAC,QAAQ,EAAEF,IAAI,CAAC;AAE1BG,MAAM,CAACC,OAAO,GAAGT,MAAM"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3cd526846eae1987a22755eb49433884b560128f","contentHash":"67541eea24710c68dcc18a0451256c4b93bbd2864660bd2f716598aaaf75440d"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\pizza-create.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\pizza-create.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":2,"column":18},"end":{"line":2,"column":55}},"2":{"start":{"line":3,"column":0},"end":{"line":49,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":48,"column":3}},"4":{"start":{"line":5,"column":17},"end":{"line":5,"column":30}},"5":{"start":{"line":6,"column":17},"end":{"line":6,"column":33}},"6":{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},"7":{"start":{"line":8,"column":6},"end":{"line":12,"column":9}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":16}},"9":{"start":{"line":21,"column":4},"end":{"line":27,"column":5}},"10":{"start":{"line":22,"column":6},"end":{"line":26,"column":9}},"11":{"start":{"line":28,"column":18},"end":{"line":34,"column":6}},"12":{"start":{"line":35,"column":4},"end":{"line":39,"column":7}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"14":{"start":{"line":42,"column":4},"end":{"line":46,"column":7}},"15":{"start":{"line":47,"column":4},"end":{"line":47,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":43},"end":{"line":49,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},{"start":{"line":7,"column":4},"end":{"line":13,"column":5}}],"line":7},"1":{"loc":{"start":{"line":21,"column":4},"end":{"line":27,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":27,"column":5}},{"start":{"line":21,"column":4},"end":{"line":27,"column":5}}],"line":21},"2":{"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":49}},"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":13}},{"start":{"line":21,"column":17},"end":{"line":21,"column":29}},{"start":{"line":21,"column":33},"end":{"line":21,"column":39}},{"start":{"line":21,"column":43},"end":{"line":21,"column":49}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0,0,0]},"inputSourceMap":{"version":3,"names":["Pizza","require","timeStamp","module","exports","req","res","next","role","user","process","env","USER","status","json","msg","STATUS","time","name","description","price","available","image","body","pizza","create","data","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["pizza-create.controller.js"],"sourcesContent":["const Pizza = require('../../../db/models/pizza.model');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nmodule.exports = async (req, res, next) => {\r\n\ttry {\r\n\t\tconst role = req.user.role;\r\n\t\tconst user = process.env.USER;\r\n\t\tif (role !== user) {\r\n\t\t\treturn res.status(401).json({ msg: 'Not authorized', STATUS: 401, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\tconst { name, description, price, available, image } = req.body;\r\n\t\tif (!name || !description || !price || !image) {\r\n\t\t\treturn res.status(400).json({ msg: 'Please enter all fields', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\tconst pizza = await Pizza.create({\r\n\t\t\tname,\r\n\t\t\tdescription,\r\n\t\t\tprice,\r\n\t\t\tavailable,\r\n\t\t\timage,\r\n\t\t});\r\n\t\tres.status(201).json({ STATUS: 201, data: pizza, time: timeStamp() });\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAMC,SAAS,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAEvDE,MAAM,CAACC,OAAO,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1C,IAAI;IACH,MAAMC,IAAI,GAAGH,GAAG,CAACI,IAAI,CAACD,IAAI;IAC1B,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;IAC7B,IAAIJ,IAAI,KAAKC,IAAI,EAAE;MAClB,OAAOH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,gBAAgB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEf,SAAS,CAAC;MAAE,CAAC,CAAC;IACvF;IAEA,MAAM;MAAEgB,IAAI;MAAEC,WAAW;MAAEC,KAAK;MAAEC,SAAS;MAAEC;IAAM,CAAC,GAAGjB,GAAG,CAACkB,IAAI;IAC/D,IAAI,CAACL,IAAI,IAAI,CAACC,WAAW,IAAI,CAACC,KAAK,IAAI,CAACE,KAAK,EAAE;MAC9C,OAAOhB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEf,SAAS,CAAC;MAAE,CAAC,CAAC;IAChG;IAEA,MAAMsB,KAAK,GAAG,MAAMxB,KAAK,CAACyB,MAAM,CAAC;MAChCP,IAAI;MACJC,WAAW;MACXC,KAAK;MACLC,SAAS;MACTC;IACD,CAAC,CAAC;IACFhB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEU,IAAI,EAAEF,KAAK;MAAEP,IAAI,EAAEf,SAAS,CAAC;IAAE,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOyB,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BvB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEf,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACoB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ca112c40e945ffaa671d3cc95da8dde76c34cc2","contentHash":"2c0391f33f1d54329a780ff5006fee339615e41926fee14a39f7bd236f79e43f"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\pizza.model.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\pizza.model.js","statementMap":{"0":{"start":{"line":1,"column":18},"end":{"line":1,"column":38}},"1":{"start":{"line":2,"column":11},"end":{"line":2,"column":30}},"2":{"start":{"line":3,"column":14},"end":{"line":30,"column":2}},"3":{"start":{"line":31,"column":0},"end":{"line":31,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["Sequelize","require","db","Pizza","define","id","type","INTEGER","primaryKey","autoIncrement","name","STRING","allowNull","description","price","available","BOOLEAN","defaultValue","image","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\","sources":["pizza.model.js"],"sourcesContent":["const Sequelize = require('sequelize');\r\nconst db = require('../db.js');\r\n\r\nconst Pizza = db.define('pizza', {\r\n\tid: {\r\n\t\ttype: Sequelize.INTEGER,\r\n\t\tprimaryKey: true,\r\n\t\tautoIncrement: true,\r\n\t},\r\n\tname: { type: Sequelize.STRING, allowNull: false },\r\n\tdescription: { type: Sequelize.STRING, allowNull: false },\r\n\tprice: { type: Sequelize.INTEGER, allowNull: false },\r\n\tavailable: { type: Sequelize.BOOLEAN, allowNull: false, defaultValue: true },\r\n\timage: { type: Sequelize.STRING, allowNull: false },\r\n});\r\n\r\nmodule.exports = Pizza;\r\n"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMC,EAAE,GAAGD,OAAO,CAAC,UAAU,CAAC;AAE9B,MAAME,KAAK,GAAGD,EAAE,CAACE,MAAM,CAAC,OAAO,EAAE;EAChCC,EAAE,EAAE;IACHC,IAAI,EAAEN,SAAS,CAACO,OAAO;IACvBC,UAAU,EAAE,IAAI;IAChBC,aAAa,EAAE;EAChB,CAAC;EACDC,IAAI,EAAE;IAAEJ,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE;EAAM,CAAC;EAClDC,WAAW,EAAE;IAAEP,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE;EAAM,CAAC;EACzDE,KAAK,EAAE;IAAER,IAAI,EAAEN,SAAS,CAACO,OAAO;IAAEK,SAAS,EAAE;EAAM,CAAC;EACpDG,SAAS,EAAE;IAAET,IAAI,EAAEN,SAAS,CAACgB,OAAO;IAAEJ,SAAS,EAAE,KAAK;IAAEK,YAAY,EAAE;EAAK,CAAC;EAC5EC,KAAK,EAAE;IAAEZ,IAAI,EAAEN,SAAS,CAACW,MAAM;IAAEC,SAAS,EAAE;EAAM;AACnD,CAAC,CAAC;AAEFO,MAAM,CAACC,OAAO,GAAGjB,KAAK"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c7f084f3130c524718a9ba08a1e481980ce2a989","contentHash":"0646eaf65a27d980b2c11fa1aef0414d016526ea5ed5a59e381dbd1239782c0c"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\middleware\\auth.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\middleware\\auth.js","statementMap":{"0":{"start":{"line":1,"column":12},"end":{"line":1,"column":35}},"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"2":{"start":{"line":3,"column":0},"end":{"line":17,"column":2}},"3":{"start":{"line":4,"column":16},"end":{"line":4,"column":35}},"4":{"start":{"line":5,"column":2},"end":{"line":7,"column":5}},"5":{"start":{"line":5,"column":14},"end":{"line":7,"column":5}},"6":{"start":{"line":8,"column":2},"end":{"line":16,"column":3}},"7":{"start":{"line":9,"column":19},"end":{"line":9,"column":60}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":27}},"9":{"start":{"line":11,"column":4},"end":{"line":11,"column":11}},"10":{"start":{"line":13,"column":4},"end":{"line":15,"column":7}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":43},"end":{"line":17,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":2},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":2},"end":{"line":7,"column":5}},{"start":{"line":5,"column":2},"end":{"line":7,"column":5}}],"line":5}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"names":["jwt","require","config","module","exports","req","res","next","token","header","status","json","message","verify","process","env","JWT_SECRET","user","e"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\middleware\\","sources":["auth.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\n\r\nrequire('dotenv').config();\r\n\r\nmodule.exports = function (req, res, next) {\r\n\tconst token = req.header('token');\r\n\r\n\tif (!token) return res.status(403).json({ message: 'Auth Error' });\r\n\r\n\ttry {\r\n\t\tconst verify = jwt.verify(token, process.env.JWT_SECRET);\r\n\t\treq.user = verify.user;\r\n\t\tnext();\r\n\t} catch (e) {\r\n\t\tres.status(400).json({ message: e });\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AAEnCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1BC,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC1C,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAM,CAAC,OAAO,CAAC;EAEjC,IAAI,CAACD,KAAK,EAAE,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,OAAO,EAAE;EAAa,CAAC,CAAC;EAElE,IAAI;IACH,MAAMC,MAAM,GAAGb,GAAG,CAACa,MAAM,CAACL,KAAK,EAAEM,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACxDX,GAAG,CAACY,IAAI,GAAGJ,MAAM,CAACI,IAAI;IACtBV,IAAI,CAAC,CAAC;EACP,CAAC,CAAC,OAAOW,CAAC,EAAE;IACXZ,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEM;IAAE,CAAC,CAAC;EACrC;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"33c6b63d568dbcd80c37d2917d0966b0cbd15822","contentHash":"399f3feb6e02a4f7144083299d750871904ca348d1cce7c5583906b3e3ab79e8"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\pizza-create.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\pizza-create.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":14,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["Segments","Joi","celebrate","require","module","exports","BODY","object","keys","name","string","required","description","price","number","integer","available","boolean","default","image"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\","sources":["pizza-create.validator.js"],"sourcesContent":["const { Segments, Joi, celebrate } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.BODY]: Joi.object().keys({\r\n\t\tname: Joi.string().required(),\r\n\t\tdescription: Joi.string().required(),\r\n\t\tprice: Joi.number().integer().required(),\r\n\t\tavailable: Joi.boolean().default(true),\r\n\t\timage: Joi.string().required(),\r\n\t}),\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,QAAQ;EAAEC,GAAG;EAAEC;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGH,SAAS,CAAC;EAC1B,CAACF,QAAQ,CAACM,IAAI,GAAGL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IAClCC,IAAI,EAAER,GAAG,CAACS,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC7BC,WAAW,EAAEX,GAAG,CAACS,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IACpCE,KAAK,EAAEZ,GAAG,CAACa,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACJ,QAAQ,CAAC,CAAC;IACxCK,SAAS,EAAEf,GAAG,CAACgB,OAAO,CAAC,CAAC,CAACC,OAAO,CAAC,IAAI,CAAC;IACtCC,KAAK,EAAElB,GAAG,CAACS,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC;EAC9B,CAAC;AACF,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"afaaf046d541ae8b28519ee7cadb0e255b28b865","contentHash":"9571c93b3dde9a072f1313552b932033b9dfa33c569e744465e89e9d9e433a86"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\pizza-view.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\pizza-view.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":2,"column":19},"end":{"line":2,"column":57}},"2":{"start":{"line":3,"column":18},"end":{"line":3,"column":55}},"3":{"start":{"line":4,"column":0},"end":{"line":27,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":26,"column":3}},"5":{"start":{"line":6,"column":17},"end":{"line":6,"column":46}},"6":{"start":{"line":7,"column":18},"end":{"line":7,"column":49}},"7":{"start":{"line":8,"column":17},"end":{"line":8,"column":53}},"8":{"start":{"line":9,"column":4},"end":{"line":17,"column":7}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"10":{"start":{"line":20,"column":4},"end":{"line":24,"column":7}},"11":{"start":{"line":25,"column":4},"end":{"line":25,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"loc":{"start":{"line":4,"column":49},"end":{"line":27,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":46}},"type":"binary-expr","locations":[{"start":{"line":6,"column":17},"end":{"line":6,"column":41}},{"start":{"line":6,"column":45},"end":{"line":6,"column":46}}],"line":6},"1":{"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":49}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":43}},{"start":{"line":7,"column":47},"end":{"line":7,"column":49}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0},"f":{"0":1},"b":{"0":[1,0],"1":[1,0]},"inputSourceMap":{"version":3,"names":["Pizza","require","pagination","timeStamp","module","exports","req","res","next","page","parseInt","query","limit","view","status","json","STATUS","data","time","totalPages","Math","ceil","count","totalItems","error","console","message","msg"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["pizza-view.controller.js"],"sourcesContent":["const Pizza = require('../../../db/models/pizza.model');\r\nconst pagination = require('../../../helpers/pagination');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst page = parseInt(req.query.page) || 1;\r\n\t\tconst limit = parseInt(req.query.limit) || 10;\r\n\r\n\t\tconst view = await pagination(Pizza, page, limit);\r\n\t\tres.status(200).json({\r\n\t\t\tSTATUS: 200,\r\n\t\t\tdata: view,\r\n\t\t\ttime: timeStamp(),\r\n\t\t\tpage,\r\n\t\t\tlimit,\r\n\t\t\ttotalPages: Math.ceil(view.count / limit),\r\n\t\t\ttotalItems: view.count,\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAMC,UAAU,GAAGD,OAAO,CAAC,6BAA6B,CAAC;AACzD,MAAME,SAAS,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AAEvDG,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,IAAI,GAAGC,QAAQ,CAACJ,GAAG,CAACK,KAAK,CAACF,IAAI,CAAC,IAAI,CAAC;IAC1C,MAAMG,KAAK,GAAGF,QAAQ,CAACJ,GAAG,CAACK,KAAK,CAACC,KAAK,CAAC,IAAI,EAAE;IAE7C,MAAMC,IAAI,GAAG,MAAMX,UAAU,CAACF,KAAK,EAAES,IAAI,EAAEG,KAAK,CAAC;IACjDL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACpBC,MAAM,EAAE,GAAG;MACXC,IAAI,EAAEJ,IAAI;MACVK,IAAI,EAAEf,SAAS,CAAC,CAAC;MACjBM,IAAI;MACJG,KAAK;MACLO,UAAU,EAAEC,IAAI,CAACC,IAAI,CAACR,IAAI,CAACS,KAAK,GAAGV,KAAK,CAAC;MACzCW,UAAU,EAAEV,IAAI,CAACS;IAClB,CAAC,CAAC;EACH,CAAC,CAAC,OAAOE,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BnB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEY,GAAG,EAAE,cAAc;MAAEX,MAAM,EAAE,GAAG;MAAEE,IAAI,EAAEf,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACgB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ca29a7f4bbd23c3aa2fe734abbfef5eeb073b347","contentHash":"ca500b4fe73a8d095a3bae05227d5014e2a0a21947458b9a23dbbde160f6b442"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\pagination.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\pagination.js","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":1,"column":43}},"1":{"start":{"line":2,"column":0},"end":{"line":10,"column":2}},"2":{"start":{"line":3,"column":17},"end":{"line":3,"column":35}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":38}},"4":{"start":{"line":5,"column":2},"end":{"line":9,"column":5}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":17},"end":{"line":2,"column":18}},"loc":{"start":{"line":2,"column":68},"end":{"line":10,"column":1}},"line":2}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"names":["options","require","module","exports","model","userId","Pizza","User","page","limit","offest","findAndCountAll"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\helpers\\","sources":["pagination.js"],"sourcesContent":["const options = require('../utils/options');\r\nmodule.exports = function (model, userId, Pizza, User, page, limit) {\r\n\tconst offest = (page - 1) * limit;\r\n\toptions(model, userId, Pizza, User);\r\n\treturn model.findAndCountAll({\r\n\t\tlimit,\r\n\t\toffest,\r\n\t\t...options,\r\n\t});\r\n};\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAC3CC,MAAM,CAACC,OAAO,GAAG,UAAUC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAE;EACnE,MAAMC,MAAM,GAAG,CAACF,IAAI,GAAG,CAAC,IAAIC,KAAK;EACjCT,OAAO,CAACI,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,CAAC;EACnC,OAAOH,KAAK,CAACO,eAAe,CAAC;IAC5BF,KAAK;IACLC,MAAM;IACN,GAAGV;EACJ,CAAC,CAAC;AACH,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f6310e4544f7f29a7c74e732e91290d988e7a3f2","contentHash":"57f506190211a1e6624254c1aa7f90c0fa73d88347ea98b4b9fe8b0c046a6cd7"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\options.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\options.js","statementMap":{"0":{"start":{"line":1,"column":0},"end":{"line":13,"column":2}},"1":{"start":{"line":2,"column":2},"end":{"line":12,"column":3}},"2":{"start":{"line":4,"column":6},"end":{"line":9,"column":8}},"3":{"start":{"line":11,"column":6},"end":{"line":11,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":17},"end":{"line":1,"column":18}},"loc":{"start":{"line":1,"column":55},"end":{"line":13,"column":1}},"line":1}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":2},"end":{"line":12,"column":3}},"type":"switch","locations":[{"start":{"line":3,"column":4},"end":{"line":9,"column":8}},{"start":{"line":10,"column":4},"end":{"line":11,"column":16}}],"line":2}},"s":{"0":1,"1":1,"2":0,"3":1},"f":{"0":1},"b":{"0":[0,1]},"inputSourceMap":{"version":3,"names":["module","exports","model","userId","Pizza","User","name","where","include"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\utils\\","sources":["options.js"],"sourcesContent":["module.exports = function (model, userId, Pizza, User) {\r\n\tswitch (model.name) {\r\n\t\tcase 'Order':\r\n\t\t\treturn {\r\n\t\t\t\twhere: { userId },\r\n\t\t\t\tinclude: [Pizza, User],\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn {};\r\n\t}\r\n};\r\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAG,UAAUC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAE;EACtD,QAAQH,KAAK,CAACI,IAAI;IACjB,KAAK,OAAO;MACX,OAAO;QACNC,KAAK,EAAE;UAAEJ;QAAO,CAAC;QACjBK,OAAO,EAAE,CAACJ,KAAK,EAAEC,IAAI;MACtB,CAAC;IAEF;MACC,OAAO,CAAC,CAAC;EACX;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6619c4f53976ae714abb5610c4ec8855140c21ba","contentHash":"edf4ce5ec3cc91d5d09fbe393e2aad7e525a00e92f78ce4784350bddb7534fe7"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\order.route.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\order.route.js","statementMap":{"0":{"start":{"line":1,"column":16},"end":{"line":1,"column":34}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":80}},"3":{"start":{"line":4,"column":29},"end":{"line":4,"column":87}},"4":{"start":{"line":5,"column":14},"end":{"line":5,"column":63}},"5":{"start":{"line":6,"column":14},"end":{"line":6,"column":63}},"6":{"start":{"line":7,"column":13},"end":{"line":7,"column":60}},"7":{"start":{"line":8,"column":16},"end":{"line":8,"column":64}},"8":{"start":{"line":9,"column":12},"end":{"line":9,"column":52}},"9":{"start":{"line":10,"column":15},"end":{"line":10,"column":58}},"10":{"start":{"line":11,"column":13},"end":{"line":11,"column":42}},"11":{"start":{"line":12,"column":21},"end":{"line":12,"column":70}},"12":{"start":{"line":13,"column":29},"end":{"line":13,"column":89}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":58}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":36}},"16":{"start":{"line":17,"column":0},"end":{"line":17,"column":61}},"17":{"start":{"line":18,"column":0},"end":{"line":18,"column":41}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":49}},"19":{"start":{"line":20,"column":0},"end":{"line":20,"column":21}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["express","require","app","Router","OrderPutValidator","OrderCreateValidator","delet","order","view","viewAll","one","action","auth","OneValidator","OrderDeleteValidator","post","get","delete","put","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\routers\\","sources":["order.route.js"],"sourcesContent":["const express = require('express');\r\nconst app = express.Router();\r\nconst OrderPutValidator = require('../../../validators/put/order-put.validator');\r\nconst OrderCreateValidator = require('../../../validators/post/order-create.validator');\r\nconst delet = require('../controllers/order-delete.controller');\r\nconst order = require('../controllers/order-create.controller');\r\nconst view = require('../controllers/order-view.controller');\r\nconst viewAll = require('../controllers/order-views.controller');\r\nconst one = require('../controllers/one.controller');\r\nconst action = require('../controllers/action.controller');\r\nconst auth = require('../middleware/auth');\r\nconst OneValidator = require('../../../validators/get/One.controller');\r\nconst OrderDeleteValidator = require('../../../validators/delete/order-delete.validator');\r\n\r\napp.post('/place/:id', OrderCreateValidator, auth, order);\r\napp.get('/view/', auth, view);\r\napp.get('/view/all', auth, viewAll)\r\napp.delete('/delete/:id', OrderDeleteValidator, auth, delet);\r\napp.get('/:id', OneValidator, auth, one);\r\napp.put('/:id', OrderPutValidator, auth, action);\r\nmodule.exports = app;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC5B,MAAMC,iBAAiB,GAAGH,OAAO,CAAC,6CAA6C,CAAC;AAChF,MAAMI,oBAAoB,GAAGJ,OAAO,CAAC,iDAAiD,CAAC;AACvF,MAAMK,KAAK,GAAGL,OAAO,CAAC,wCAAwC,CAAC;AAC/D,MAAMM,KAAK,GAAGN,OAAO,CAAC,wCAAwC,CAAC;AAC/D,MAAMO,IAAI,GAAGP,OAAO,CAAC,sCAAsC,CAAC;AAC5D,MAAMQ,OAAO,GAAGR,OAAO,CAAC,uCAAuC,CAAC;AAChE,MAAMS,GAAG,GAAGT,OAAO,CAAC,+BAA+B,CAAC;AACpD,MAAMU,MAAM,GAAGV,OAAO,CAAC,kCAAkC,CAAC;AAC1D,MAAMW,IAAI,GAAGX,OAAO,CAAC,oBAAoB,CAAC;AAC1C,MAAMY,YAAY,GAAGZ,OAAO,CAAC,wCAAwC,CAAC;AACtE,MAAMa,oBAAoB,GAAGb,OAAO,CAAC,mDAAmD,CAAC;AAEzFC,GAAG,CAACa,IAAI,CAAC,YAAY,EAAEV,oBAAoB,EAAEO,IAAI,EAAEL,KAAK,CAAC;AACzDL,GAAG,CAACc,GAAG,CAAC,QAAQ,EAAEJ,IAAI,EAAEJ,IAAI,CAAC;AAC7BN,GAAG,CAACc,GAAG,CAAC,WAAW,EAAEJ,IAAI,EAAEH,OAAO,CAAC;AACnCP,GAAG,CAACe,MAAM,CAAC,aAAa,EAAEH,oBAAoB,EAAEF,IAAI,EAAEN,KAAK,CAAC;AAC5DJ,GAAG,CAACc,GAAG,CAAC,MAAM,EAAEH,YAAY,EAAED,IAAI,EAAEF,GAAG,CAAC;AACxCR,GAAG,CAACgB,GAAG,CAAC,MAAM,EAAEd,iBAAiB,EAAEQ,IAAI,EAAED,MAAM,CAAC;AAChDQ,MAAM,CAACC,OAAO,GAAGlB,GAAG"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7e8e3891d2ac18fa8a4df087cebe05b809d5e604","contentHash":"04c1d948334a97a031b6f317324b332afdab26b79ea76f9e3be2feeff4b47987"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\put\\order-put.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\put\\order-put.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":13,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","BODY","approved","string","required","PARAMS","id","number"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\put\\","sources":["order-put.validator.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.BODY]: {\r\n\t\tapproved: Joi.string().required(),\r\n\t},\r\n\t[Segments.PARAMS]: {\r\n\t\tid: Joi.number().required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,IAAI,GAAG;IAChBC,QAAQ,EAAEL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC;EACjC,CAAC;EACD,CAACR,QAAQ,CAACS,MAAM,GAAG;IAClBC,EAAE,EAAET,GAAG,CAACU,MAAM,CAAC,CAAC,CAACH,QAAQ,CAAC;EAC3B;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b9b5c04c1a0817245507559b2a15d4f5072becad","contentHash":"0d5ecb5d11199ade485276b72b2d96d484a67f631c93084df36338f91f8a3a7d"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\order-create.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\order-create.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":13,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","BODY","quantity","number","integer","required","PARAMS","id"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\post\\","sources":["order-create.validator.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.BODY]: {\r\n\t\tquantity: Joi.number().integer().required(),\r\n\t},\r\n\t[Segments.PARAMS]: {\r\n\t\tid: Joi.number().required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,IAAI,GAAG;IAChBC,QAAQ,EAAEL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC;EAC3C,CAAC;EACD,CAACT,QAAQ,CAACU,MAAM,GAAG;IAClBC,EAAE,EAAEV,GAAG,CAACM,MAAM,CAAC,CAAC,CAACE,QAAQ,CAAC;EAC3B;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a06d8bd218a395723d218424f39dfe9b1a1d6053","contentHash":"affafa41d105553558b561158b404014833ea9ac6b00f88dbae5514f2bcd6ff1"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-delete.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-delete.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":2,"column":18},"end":{"line":2,"column":55}},"2":{"start":{"line":3,"column":0},"end":{"line":34,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":33,"column":3}},"4":{"start":{"line":5,"column":19},"end":{"line":5,"column":30}},"5":{"start":{"line":6,"column":15},"end":{"line":6,"column":28}},"6":{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},"7":{"start":{"line":8,"column":6},"end":{"line":12,"column":9}},"8":{"start":{"line":14,"column":17},"end":{"line":19,"column":6}},"9":{"start":{"line":20,"column":4},"end":{"line":24,"column":7}},"10":{"start":{"line":26,"column":4},"end":{"line":26,"column":33}},"11":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"12":{"start":{"line":32,"column":4},"end":{"line":32,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":49},"end":{"line":34,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},{"start":{"line":7,"column":4},"end":{"line":13,"column":5}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"names":["Order","require","timeStamp","module","exports","req","res","next","userId","user","id","params","status","json","msg","STATUS","time","view","destroy","where","data","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["order-delete.controller.js"],"sourcesContent":["const Order = require('../../../db/models/order.model');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst userId = req.user.id;\r\n\r\n\t\tconst id = req.params.id;\r\n\t\tif (!id) {\r\n\t\t\treturn res.status(400).json({ msg: 'Nothing here', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\t\tconst view = await Order.destroy({\r\n\t\t\twhere: { id, userId },\r\n\t\t});\r\n\t\tres.status(200).json({ STATUS: 200, data: view, time: timeStamp() });\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAMC,SAAS,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAEvDE,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAE1B,MAAMA,EAAE,GAAGL,GAAG,CAACM,MAAM,CAACD,EAAE;IACxB,IAAI,CAACA,EAAE,EAAE;MACR,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,cAAc;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEd,SAAS,CAAC;MAAE,CAAC,CAAC;IACrF;IACA,MAAMe,IAAI,GAAG,MAAMjB,KAAK,CAACkB,OAAO,CAAC;MAChCC,KAAK,EAAE;QAAET,EAAE;QAAEF;MAAO;IACrB,CAAC,CAAC;IACFF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEK,IAAI,EAAEH,IAAI;MAAED,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;EACrE,CAAC,CAAC,OAAOmB,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BjB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACc,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aa5c9569ddf95abf838b5b6407f77c25bd4f67e8","contentHash":"e79800273e8d7f4ae94ea1c882fb74e1084877f711df282a6af6602d0e66912f"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\order.model.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\order.model.js","statementMap":{"0":{"start":{"line":1,"column":11},"end":{"line":1,"column":30}},"1":{"start":{"line":2,"column":18},"end":{"line":2,"column":38}},"2":{"start":{"line":3,"column":14},"end":{"line":26,"column":2}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["db","require","Sequelize","Order","define","id","type","INTEGER","primaryKey","autoIncrement","approved","STRING","allowNull","defaultValue","userId","pizzaId","quantity","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\","sources":["order.model.js"],"sourcesContent":["const db = require('../db.js');\r\nconst Sequelize = require('sequelize');\r\nconst Order = db.define('order', {\r\n\tid: {\r\n\t\ttype: Sequelize.INTEGER,\r\n\t\tprimaryKey: true,\r\n\t\tautoIncrement: true,\r\n\t},\r\n\tapproved: { type: Sequelize.STRING, allowNull: false, defaultValue: 'Pending' },\r\n\tuserId: { type: Sequelize.INTEGER, allowNull: false },\r\n\tpizzaId: { type: Sequelize.INTEGER, allowNull: false },\r\n\tquantity: { type: Sequelize.INTEGER, allowNull: false },\r\n});\r\n\r\nmodule.exports = Order;\r\n"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,UAAU,CAAC;AAC9B,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAW,CAAC;AACtC,MAAME,KAAK,GAAGH,EAAE,CAACI,MAAM,CAAC,OAAO,EAAE;EAChCC,EAAE,EAAE;IACHC,IAAI,EAAEJ,SAAS,CAACK,OAAO;IACvBC,UAAU,EAAE,IAAI;IAChBC,aAAa,EAAE;EAChB,CAAC;EACDC,QAAQ,EAAE;IAAEJ,IAAI,EAAEJ,SAAS,CAACS,MAAM;IAAEC,SAAS,EAAE,KAAK;IAAEC,YAAY,EAAE;EAAU,CAAC;EAC/EC,MAAM,EAAE;IAAER,IAAI,EAAEJ,SAAS,CAACK,OAAO;IAAEK,SAAS,EAAE;EAAM,CAAC;EACrDG,OAAO,EAAE;IAAET,IAAI,EAAEJ,SAAS,CAACK,OAAO;IAAEK,SAAS,EAAE;EAAM,CAAC;EACtDI,QAAQ,EAAE;IAAEV,IAAI,EAAEJ,SAAS,CAACK,OAAO;IAAEK,SAAS,EAAE;EAAM;AACvD,CAAC,CAAC;AAEFK,MAAM,CAACC,OAAO,GAAGf,KAAK"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d7922a6e33ba8d6c2c167d836bf6a7d77bd016bc","contentHash":"d0585797b156456544da5a4e6ef401d429896def61f5e5cf7c82efe0b64df0e8"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-create.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-create.controller.js","statementMap":{"0":{"start":{"line":4,"column":4},"end":{"line":4,"column":46}},"1":{"start":{"line":5,"column":14},"end":{"line":5,"column":55}},"2":{"start":{"line":6,"column":18},"end":{"line":6,"column":55}},"3":{"start":{"line":7,"column":0},"end":{"line":40,"column":2}},"4":{"start":{"line":8,"column":2},"end":{"line":39,"column":3}},"5":{"start":{"line":9,"column":19},"end":{"line":9,"column":30}},"6":{"start":{"line":10,"column":20},"end":{"line":10,"column":33}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":16}},"8":{"start":{"line":14,"column":4},"end":{"line":20,"column":5}},"9":{"start":{"line":15,"column":6},"end":{"line":19,"column":9}},"10":{"start":{"line":21,"column":18},"end":{"line":26,"column":6}},"11":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"12":{"start":{"line":33,"column":4},"end":{"line":37,"column":7}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":18}},"loc":{"start":{"line":7,"column":49},"end":{"line":40,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":20,"column":5}},{"start":{"line":14,"column":4},"end":{"line":20,"column":5}}],"line":14},"1":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"type":"binary-expr","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":16}},{"start":{"line":14,"column":20},"end":{"line":14,"column":29}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"names":["Pizza","User","require","Order","timeStamp","module","exports","req","res","next","userId","user","id","pizzaId","params","quantity","body","status","json","msg","STATUS","time","order","create","include","data","error"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["order-create.controller.js"],"sourcesContent":["const { Pizza, User } = require('../../../db/models/associations');\r\nconst Order = require('../../../db/models/order.model');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst userId = req.user.id;\r\n\t\tconst pizzaId = req.params.id;\r\n\r\n\t\tconst { quantity } = req.body;\r\n\t\tif (!pizzaId || !quantity) {\r\n\t\t\treturn res.status(400).json({ msg: 'Please enter all fields', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\tconst order = await Order.create({\r\n\t\t\tuserId,\r\n\t\t\tpizzaId,\r\n\t\t\tquantity,\r\n\t\t\tinclude: [Pizza, User],\r\n\t\t});\r\n\t\tres.status(201).json({ STATUS: 201, data: order, time: timeStamp() });\r\n\t} catch (error) {\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAM;EAAEA,KAAK;EAAEC;AAAK,CAAC,GAAGC,OAAO,CAAC,iCAAiC,CAAC;AAClE,MAAMC,KAAK,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAME,SAAS,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AAEvDG,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1B,MAAMC,OAAO,GAAGN,GAAG,CAACO,MAAM,CAACF,EAAE;IAE7B,MAAM;MAAEG;IAAS,CAAC,GAAGR,GAAG,CAACS,IAAI;IAC7B,IAAI,CAACH,OAAO,IAAI,CAACE,QAAQ,EAAE;MAC1B,OAAOP,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEjB,SAAS,CAAC;MAAE,CAAC,CAAC;IAChG;IAEA,MAAMkB,KAAK,GAAG,MAAMnB,KAAK,CAACoB,MAAM,CAAC;MAChCb,MAAM;MACNG,OAAO;MACPE,QAAQ;MACRS,OAAO,EAAE,CAACxB,KAAK,EAAEC,IAAI;IACtB,CAAC,CAAC;IACFO,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEK,IAAI,EAAEH,KAAK;MAAED,IAAI,EAAEjB,SAAS,CAAC;IAAE,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOsB,KAAK,EAAE;IACflB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEjB,SAAS,CAAC;IAAE,CAAC,CAAC;IAE7EK,IAAI,CAACiB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6cd3c4f8ee5d00fc757b523131fd6896e6af2b16","contentHash":"e0bbb1d96bb687eb26677aa387f9996c2616ad38a2201c8e1045c10fe6cb918f"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\associations.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\associations.js","statementMap":{"0":{"start":{"line":3,"column":14},"end":{"line":3,"column":38}},"1":{"start":{"line":4,"column":14},"end":{"line":4,"column":38}},"2":{"start":{"line":5,"column":13},"end":{"line":5,"column":36}},"3":{"start":{"line":8,"column":0},"end":{"line":10,"column":3}},"4":{"start":{"line":11,"column":0},"end":{"line":13,"column":3}},"5":{"start":{"line":14,"column":0},"end":{"line":16,"column":3}},"6":{"start":{"line":17,"column":0},"end":{"line":19,"column":3}},"7":{"start":{"line":22,"column":0},"end":{"line":26,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["Order","require","Pizza","User","hasMany","foreignKey","belongsTo","module","exports"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\db\\models\\","sources":["associations.js"],"sourcesContent":["// Import the models\r\n\r\nconst Order = require(\"./order.model\");\r\nconst Pizza = require(\"./pizza.model\");\r\nconst User = require(\"./user.model\");\r\n\r\n// Define the associations\r\nUser.hasMany(Order, {\r\n\tforeignKey: 'userId',\r\n});\r\n\r\nOrder.belongsTo(User, {\r\n\tforeignKey: 'userId',\r\n});\r\n\r\nPizza.hasMany(Order, {\r\n\tforeignKey: 'pizzaId',\r\n});\r\n\r\nOrder.belongsTo(Pizza, {\r\n\tforeignKey: 'pizzaId',\r\n});\r\n\r\n// Export the associations\r\nmodule.exports = { User, Pizza, Order };\r\n"],"mappings":"AAAA;;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAAC,eAAe,CAAC;AACtC,MAAMC,KAAK,GAAGD,OAAO,CAAC,eAAe,CAAC;AACtC,MAAME,IAAI,GAAGF,OAAO,CAAC,cAAc,CAAC;;AAEpC;AACAE,IAAI,CAACC,OAAO,CAACJ,KAAK,EAAE;EACnBK,UAAU,EAAE;AACb,CAAC,CAAC;AAEFL,KAAK,CAACM,SAAS,CAACH,IAAI,EAAE;EACrBE,UAAU,EAAE;AACb,CAAC,CAAC;AAEFH,KAAK,CAACE,OAAO,CAACJ,KAAK,EAAE;EACpBK,UAAU,EAAE;AACb,CAAC,CAAC;AAEFL,KAAK,CAACM,SAAS,CAACJ,KAAK,EAAE;EACtBG,UAAU,EAAE;AACb,CAAC,CAAC;;AAEF;AACAE,MAAM,CAACC,OAAO,GAAG;EAAEL,IAAI;EAAED,KAAK;EAAEF;AAAM,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"886508f235f6d0aff1f78f0846bd3c9d2c24a71c","contentHash":"4da44f4dd602e4777cf7bdb854d9b99972365d75ef9bc972ed76790aad2db833"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-view.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-view.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":46}},"2":{"start":{"line":6,"column":19},"end":{"line":6,"column":57}},"3":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"4":{"start":{"line":8,"column":0},"end":{"line":45,"column":2}},"5":{"start":{"line":9,"column":2},"end":{"line":44,"column":3}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":30}},"7":{"start":{"line":11,"column":17},"end":{"line":11,"column":46}},"8":{"start":{"line":12,"column":18},"end":{"line":12,"column":49}},"9":{"start":{"line":13,"column":4},"end":{"line":18,"column":5}},"10":{"start":{"line":14,"column":6},"end":{"line":17,"column":9}},"11":{"start":{"line":26,"column":17},"end":{"line":26,"column":74}},"12":{"start":{"line":27,"column":4},"end":{"line":35,"column":7}},"13":{"start":{"line":37,"column":4},"end":{"line":37,"column":33}},"14":{"start":{"line":38,"column":4},"end":{"line":42,"column":7}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":17},"end":{"line":8,"column":18}},"loc":{"start":{"line":8,"column":49},"end":{"line":45,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":46}},"type":"binary-expr","locations":[{"start":{"line":11,"column":17},"end":{"line":11,"column":41}},{"start":{"line":11,"column":45},"end":{"line":11,"column":46}}],"line":11},"1":{"loc":{"start":{"line":12,"column":18},"end":{"line":12,"column":49}},"type":"binary-expr","locations":[{"start":{"line":12,"column":18},"end":{"line":12,"column":43}},{"start":{"line":12,"column":47},"end":{"line":12,"column":49}}],"line":12},"2":{"loc":{"start":{"line":13,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":18,"column":5}},{"start":{"line":13,"column":4},"end":{"line":18,"column":5}}],"line":13}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"names":["Order","require","Pizza","User","pagination","timeStamp","module","exports","req","res","next","userId","user","id","page","parseInt","query","limit","status","json","msg","STATUS","view","data","time","totalPages","Math","ceil","count","totalItems","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["order-view.controller.js"],"sourcesContent":["const Order = require('../../../db/models/order.model');\r\nconst { Pizza, User } = require('../../../db/models/associations');\r\nconst pagination = require('../../../helpers/pagination');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst userId = req.user.id;\r\n\t\tconst page = parseInt(req.query.page) || 1;\r\n\t\tconst limit = parseInt(req.query.limit) || 10;\r\n\r\n\t\tif (!userId) {\r\n\t\t\treturn res.status(400).json({ msg: 'This order is not yours', STATUS: 400 });\r\n\t\t}\r\n\r\n\t\t/*  await Order.findAndCountAll({\r\n\t\t\tlimit,\r\n\t\t\toffset,\r\n\t\t\twhere: { userId },\r\n\t\t\tinclude: [Pizza, User],\r\n\t\t}); */\r\n\t\tconst view = await pagination(Order, userId, Pizza, User, page, limit);\r\n\t\tres.status(200).json({\r\n\t\t\tSTATUS: 200,\r\n\t\t\tdata: view,\r\n\t\t\ttime: timeStamp(),\r\n\t\t\tpage,\r\n\t\t\tlimit,\r\n\t\t\ttotalPages: Math.ceil(view.count / limit),\r\n\t\t\ttotalItems: view.count,\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAM;EAAEC,KAAK;EAAEC;AAAK,CAAC,GAAGF,OAAO,CAAC,iCAAiC,CAAC;AAClE,MAAMG,UAAU,GAAGH,OAAO,CAAC,6BAA6B,CAAC;AACzD,MAAMI,SAAS,GAAGJ,OAAO,CAAC,4BAA4B,CAAC;AACvDK,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1B,MAAMC,IAAI,GAAGC,QAAQ,CAACP,GAAG,CAACQ,KAAK,CAACF,IAAI,CAAC,IAAI,CAAC;IAC1C,MAAMG,KAAK,GAAGF,QAAQ,CAACP,GAAG,CAACQ,KAAK,CAACC,KAAK,CAAC,IAAI,EAAE;IAE7C,IAAI,CAACN,MAAM,EAAE;MACZ,OAAOF,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE;MAAI,CAAC,CAAC;IAC7E;;IAEA;AACF;AACA;AACA;AACA;AACA;IACE,MAAMC,IAAI,GAAG,MAAMlB,UAAU,CAACJ,KAAK,EAAEW,MAAM,EAAET,KAAK,EAAEC,IAAI,EAAEW,IAAI,EAAEG,KAAK,CAAC;IACtER,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACpBE,MAAM,EAAE,GAAG;MACXE,IAAI,EAAED,IAAI;MACVE,IAAI,EAAEnB,SAAS,CAAC,CAAC;MACjBS,IAAI;MACJG,KAAK;MACLQ,UAAU,EAAEC,IAAI,CAACC,IAAI,CAACL,IAAI,CAACM,KAAK,GAAGX,KAAK,CAAC;MACzCY,UAAU,EAAEP,IAAI,CAACM;IAClB,CAAC,CAAC;EACH,CAAC,CAAC,OAAOE,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BvB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEG,IAAI,EAAEnB,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACoB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8639a50cd64e8022d8471f2ede0ccf2719f3d52f","contentHash":"5de64cae906ef2036e4dbdf8217ef52f5ef3f4ecf92c51c609daac6b5cdc8b1a"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-views.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\order-views.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":58}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":46}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}},"3":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"4":{"start":{"line":8,"column":19},"end":{"line":8,"column":60}},"5":{"start":{"line":9,"column":0},"end":{"line":45,"column":2}},"6":{"start":{"line":10,"column":2},"end":{"line":44,"column":3}},"7":{"start":{"line":11,"column":17},"end":{"line":11,"column":46}},"8":{"start":{"line":12,"column":18},"end":{"line":12,"column":49}},"9":{"start":{"line":13,"column":17},"end":{"line":13,"column":30}},"10":{"start":{"line":14,"column":17},"end":{"line":14,"column":33}},"11":{"start":{"line":15,"column":4},"end":{"line":21,"column":5}},"12":{"start":{"line":16,"column":6},"end":{"line":20,"column":9}},"13":{"start":{"line":27,"column":17},"end":{"line":27,"column":66}},"14":{"start":{"line":28,"column":4},"end":{"line":36,"column":7}},"15":{"start":{"line":38,"column":4},"end":{"line":42,"column":7}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":49},"end":{"line":45,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":46}},"type":"binary-expr","locations":[{"start":{"line":11,"column":17},"end":{"line":11,"column":41}},{"start":{"line":11,"column":45},"end":{"line":11,"column":46}}],"line":11},"1":{"loc":{"start":{"line":12,"column":18},"end":{"line":12,"column":49}},"type":"binary-expr","locations":[{"start":{"line":12,"column":18},"end":{"line":12,"column":43}},{"start":{"line":12,"column":47},"end":{"line":12,"column":49}}],"line":12},"2":{"loc":{"start":{"line":15,"column":4},"end":{"line":21,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":21,"column":5}},{"start":{"line":15,"column":4},"end":{"line":21,"column":5}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"names":["Order","require","Pizza","User","config","timeStamp","pagination","module","exports","req","res","next","page","parseInt","query","limit","role","user","process","env","USER","status","json","msg","STATUS","time","view","data","totalPages","Math","ceil","count","totalItems","error"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["order-views.controller.js"],"sourcesContent":["const Order = require('../../../db/models/order.model.js');\r\nconst { Pizza, User } = require('../../../db/models/associations');\r\n\r\nrequire('dotenv').config();\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\nconst pagination = require('../../../helpers/pagination.js');\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst page = parseInt(req.query.page) || 1;\r\n\t\tconst limit = parseInt(req.query.limit) || 10;\r\n\t\tconst role = req.user.role;\r\n\t\tconst user = process.env.USER;\r\n\t\tif (role !== user) {\r\n\t\t\treturn res\r\n\t\t\t\t.status(400)\r\n\t\t\t\t.json({ msg: 'You are not authorized to view all orders', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\t/*  Order.findAll({\r\n\t\t\tinclude: [Pizza, User],\r\n\t\t}); */\r\n\r\n\t\tconst view = await pagination(Order, Pizza, User, page, limit);\r\n\t\tres.status(200).json({\r\n\t\t\tSTATUS: 200,\r\n\t\t\tdata: view,\r\n\t\t\ttime: timeStamp(),\r\n\t\t\tpage,\r\n\t\t\tlimit,\r\n\t\t\ttotalPages: Math.ceil(view.count / limit),\r\n\t\t\ttotalItems: view.count,\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,mCAAmC,CAAC;AAC1D,MAAM;EAAEC,KAAK;EAAEC;AAAK,CAAC,GAAGF,OAAO,CAAC,iCAAiC,CAAC;AAElEA,OAAO,CAAC,QAAQ,CAAC,CAACG,MAAM,CAAC,CAAC;AAC1B,MAAMC,SAAS,GAAGJ,OAAO,CAAC,4BAA4B,CAAC;AACvD,MAAMK,UAAU,GAAGL,OAAO,CAAC,gCAAgC,CAAC;AAE5DM,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,IAAI,GAAGC,QAAQ,CAACJ,GAAG,CAACK,KAAK,CAACF,IAAI,CAAC,IAAI,CAAC;IAC1C,MAAMG,KAAK,GAAGF,QAAQ,CAACJ,GAAG,CAACK,KAAK,CAACC,KAAK,CAAC,IAAI,EAAE;IAC7C,MAAMC,IAAI,GAAGP,GAAG,CAACQ,IAAI,CAACD,IAAI;IAC1B,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;IAC7B,IAAIJ,IAAI,KAAKC,IAAI,EAAE;MAClB,OAAOP,GAAG,CACRW,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QAAEC,GAAG,EAAE,2CAA2C;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEpB,SAAS,CAAC;MAAE,CAAC,CAAC;IAC7F;;IAEA;AACF;AACA;;IAEE,MAAMqB,IAAI,GAAG,MAAMpB,UAAU,CAACN,KAAK,EAAEE,KAAK,EAAEC,IAAI,EAAES,IAAI,EAAEG,KAAK,CAAC;IAC9DL,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACpBE,MAAM,EAAE,GAAG;MACXG,IAAI,EAAED,IAAI;MACVD,IAAI,EAAEpB,SAAS,CAAC,CAAC;MACjBO,IAAI;MACJG,KAAK;MACLa,UAAU,EAAEC,IAAI,CAACC,IAAI,CAACJ,IAAI,CAACK,KAAK,GAAGhB,KAAK,CAAC;MACzCiB,UAAU,EAAEN,IAAI,CAACK;IAClB,CAAC,CAAC;EACH,CAAC,CAAC,OAAOE,KAAK,EAAE;IACfvB,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEpB,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EM,IAAI,CAACsB,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"92347ebd93096670d090dca952f1cd843c723995","contentHash":"d358f9121e08646d53ae84b99685fe4fb65a1a5ceb18ae117483ad0bc750e1c6"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\one.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\one.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":46}},"2":{"start":{"line":6,"column":18},"end":{"line":6,"column":55}},"3":{"start":{"line":9,"column":0},"end":{"line":46,"column":2}},"4":{"start":{"line":10,"column":2},"end":{"line":45,"column":3}},"5":{"start":{"line":11,"column":19},"end":{"line":11,"column":30}},"6":{"start":{"line":12,"column":15},"end":{"line":12,"column":28}},"7":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"8":{"start":{"line":14,"column":6},"end":{"line":18,"column":9}},"9":{"start":{"line":20,"column":17},"end":{"line":26,"column":6}},"10":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"11":{"start":{"line":27,"column":23},"end":{"line":31,"column":7}},"12":{"start":{"line":32,"column":4},"end":{"line":36,"column":7}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":33}},"14":{"start":{"line":39,"column":4},"end":{"line":43,"column":7}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":49},"end":{"line":46,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},{"start":{"line":13,"column":4},"end":{"line":19,"column":5}}],"line":13},"1":{"loc":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},{"start":{"line":27,"column":4},"end":{"line":31,"column":7}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"names":["Order","require","Pizza","User","timeStamp","module","exports","req","res","next","userId","user","id","params","status","json","msg","STATUS","time","view","findOne","where","include","data","error","console","message"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["one.controller.js"],"sourcesContent":["const Order = require('../../../db/models/order.model');\r\nconst { Pizza, User } = require('../../../db/models/associations');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\n//write a function to get one order\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst userId = req.user.id;\r\n\t\tconst id = req.params.id;\r\n\t\tif (!userId) {\r\n\t\t\treturn res.status(400).json({ msg: 'This order is not yours', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\t\tconst view = await Order.findOne({\r\n\t\t\twhere: { userId, id },\r\n\t\t\tinclude: [Pizza, User],\r\n\t\t});\r\n\t\tif (view === null)\r\n\t\t\treturn res.status(400).json({ msg: 'This order is deleted ', STATUS: 400, time: timeStamp() });\r\n\t\tres.status(200).json({ STATUS: 200, data: view, time: timeStamp() });\r\n\t} catch (error) {\r\n\t\tconsole.error(error.message);\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAM;EAAEC,KAAK;EAAEC;AAAK,CAAC,GAAGF,OAAO,CAAC,iCAAiC,CAAC;AAClE,MAAMG,SAAS,GAAGH,OAAO,CAAC,4BAA4B,CAAC;;AAEvD;AACAI,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1B,MAAMA,EAAE,GAAGL,GAAG,CAACM,MAAM,CAACD,EAAE;IACxB,IAAI,CAACF,MAAM,EAAE;MACZ,OAAOF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,yBAAyB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEd,SAAS,CAAC;MAAE,CAAC,CAAC;IAChG;IACA,MAAMe,IAAI,GAAG,MAAMnB,KAAK,CAACoB,OAAO,CAAC;MAChCC,KAAK,EAAE;QAAEX,MAAM;QAAEE;MAAG,CAAC;MACrBU,OAAO,EAAE,CAACpB,KAAK,EAAEC,IAAI;IACtB,CAAC,CAAC;IACF,IAAIgB,IAAI,KAAK,IAAI,EAChB,OAAOX,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,wBAAwB;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;IAC/FI,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEM,IAAI,EAAEJ,IAAI;MAAED,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;EACrE,CAAC,CAAC,OAAOoB,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAC5BlB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEd,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EK,IAAI,CAACe,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"af55c01b5a422607726d170d76b3a08554e0bdb3","contentHash":"6d2586143803d9eb2cde4bdf16703d1bc402708589915a0e38d51c4d7a61e1d1"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\action.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\action.controller.js","statementMap":{"0":{"start":{"line":1,"column":14},"end":{"line":1,"column":55}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":46}},"2":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"3":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"5":{"start":{"line":9,"column":0},"end":{"line":70,"column":2}},"6":{"start":{"line":10,"column":2},"end":{"line":69,"column":3}},"7":{"start":{"line":11,"column":17},"end":{"line":11,"column":30}},"8":{"start":{"line":12,"column":17},"end":{"line":12,"column":33}},"9":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"10":{"start":{"line":14,"column":6},"end":{"line":18,"column":9}},"11":{"start":{"line":20,"column":19},"end":{"line":20,"column":30}},"12":{"start":{"line":21,"column":15},"end":{"line":21,"column":28}},"13":{"start":{"line":24,"column":8},"end":{"line":24,"column":16}},"14":{"start":{"line":25,"column":4},"end":{"line":31,"column":5}},"15":{"start":{"line":26,"column":6},"end":{"line":30,"column":9}},"16":{"start":{"line":32,"column":17},"end":{"line":41,"column":6}},"17":{"start":{"line":42,"column":18},"end":{"line":48,"column":6}},"18":{"start":{"line":49,"column":4},"end":{"line":55,"column":5}},"19":{"start":{"line":50,"column":6},"end":{"line":54,"column":9}},"20":{"start":{"line":56,"column":18},"end":{"line":56,"column":34}},"21":{"start":{"line":57,"column":4},"end":{"line":60,"column":7}},"22":{"start":{"line":61,"column":4},"end":{"line":61,"column":120}},"23":{"start":{"line":63,"column":4},"end":{"line":67,"column":7}},"24":{"start":{"line":68,"column":4},"end":{"line":68,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":49},"end":{"line":70,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},{"start":{"line":13,"column":4},"end":{"line":19,"column":5}}],"line":13},"1":{"loc":{"start":{"line":25,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":31,"column":5}},{"start":{"line":25,"column":4},"end":{"line":31,"column":5}}],"line":25},"2":{"loc":{"start":{"line":49,"column":4},"end":{"line":55,"column":5}},"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":55,"column":5}},{"start":{"line":49,"column":4},"end":{"line":55,"column":5}}],"line":49}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"names":["Order","require","Pizza","User","sendMail","timeStamp","config","module","exports","req","res","next","role","user","process","env","USER","status","json","msg","STATUS","time","userId","id","params","approved","body","view","update","where","returning","plain","order","findOne","include","email","data","error"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\api\\v1\\controllers\\","sources":["action.controller.js"],"sourcesContent":["const Order = require('../../../db/models/order.model');\r\nconst { Pizza, User } = require('../../../db/models/associations');\r\nconst sendMail = require('../../../services/gmail');\r\nconst timeStamp = require('../../../helpers/timeStamp');\r\n\r\nrequire('dotenv').config();\r\n\r\nmodule.exports = async function (req, res, next) {\r\n\ttry {\r\n\t\tconst role = req.user.role;\r\n\t\tconst user = process.env.USER;\r\n\t\tif (role !== user) {\r\n\t\t\treturn res.status(400).json({ msg: 'You are not admin', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\tconst userId = req.user.id;\r\n\t\tconst id = req.params.id;\r\n\t\tconst { approved } = req.body;\r\n\t\tif (!id) {\r\n\t\t\treturn res.status(400).json({ msg: 'Nothing here', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\r\n\t\tconst view = await Order.update(\r\n\t\t\t{\r\n\t\t\t\tapproved,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\twhere: { userId, id },\r\n\t\t\t\treturning: true,\r\n\t\t\t\tplain: true,\r\n\t\t\t},\r\n\t\t);\r\n\t\tconst order = await Order.findOne({\r\n\t\t\twhere: { userId, id },\r\n\t\t\tinclude: [Pizza, User],\r\n\t\t});\r\n\t\tif (!order) {\r\n\t\t\treturn res.status(400).json({ msg: 'Nothing here', STATUS: 400, time: timeStamp() });\r\n\t\t}\r\n\t\tconst email = order.user.email;\r\n\r\n\t\tres.status(201).json({ STATUS: 201, data: view });\r\n\t\tsendMail(\r\n\t\t\temail,\r\n\t\t\t`Hi we wanted to tell ypu that your order has been ${approved}`,\r\n\t\t\t`Your order has been ${approved}`,\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tres.status(500).json({ msg: 'Server error', STATUS: 500, time: timeStamp() });\r\n\t\tnext(error);\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACvD,MAAM;EAAEC,KAAK;EAAEC;AAAK,CAAC,GAAGF,OAAO,CAAC,iCAAiC,CAAC;AAClE,MAAMG,QAAQ,GAAGH,OAAO,CAAC,yBAAyB,CAAC;AACnD,MAAMI,SAAS,GAAGJ,OAAO,CAAC,4BAA4B,CAAC;AAEvDA,OAAO,CAAC,QAAQ,CAAC,CAACK,MAAM,CAAC,CAAC;AAE1BC,MAAM,CAACC,OAAO,GAAG,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAChD,IAAI;IACH,MAAMC,IAAI,GAAGH,GAAG,CAACI,IAAI,CAACD,IAAI;IAC1B,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;IAC7B,IAAIJ,IAAI,KAAKC,IAAI,EAAE;MAClB,OAAOH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,mBAAmB;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEhB,SAAS,CAAC;MAAE,CAAC,CAAC;IAC1F;IAEA,MAAMiB,MAAM,GAAGb,GAAG,CAACI,IAAI,CAACU,EAAE;IAC1B,MAAMA,EAAE,GAAGd,GAAG,CAACe,MAAM,CAACD,EAAE;IACxB,MAAM;MAAEE;IAAS,CAAC,GAAGhB,GAAG,CAACiB,IAAI;IAC7B,IAAI,CAACH,EAAE,EAAE;MACR,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,cAAc;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEhB,SAAS,CAAC;MAAE,CAAC,CAAC;IACrF;IAEA,MAAMsB,IAAI,GAAG,MAAM3B,KAAK,CAAC4B,MAAM,CAC9B;MACCH;IACD,CAAC,EACD;MACCI,KAAK,EAAE;QAAEP,MAAM;QAAEC;MAAG,CAAC;MACrBO,SAAS,EAAE,IAAI;MACfC,KAAK,EAAE;IACR,CACD,CAAC;IACD,MAAMC,KAAK,GAAG,MAAMhC,KAAK,CAACiC,OAAO,CAAC;MACjCJ,KAAK,EAAE;QAAEP,MAAM;QAAEC;MAAG,CAAC;MACrBW,OAAO,EAAE,CAAChC,KAAK,EAAEC,IAAI;IACtB,CAAC,CAAC;IACF,IAAI,CAAC6B,KAAK,EAAE;MACX,OAAOtB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,GAAG,EAAE,cAAc;QAAEC,MAAM,EAAE,GAAG;QAAEC,IAAI,EAAEhB,SAAS,CAAC;MAAE,CAAC,CAAC;IACrF;IACA,MAAM8B,KAAK,GAAGH,KAAK,CAACnB,IAAI,CAACsB,KAAK;IAE9BzB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,MAAM,EAAE,GAAG;MAAEgB,IAAI,EAAET;IAAK,CAAC,CAAC;IACjDvB,QAAQ,CACP+B,KAAK,EACJ,qDAAoDV,QAAS,EAAC,EAC9D,uBAAsBA,QAAS,EACjC,CAAC;EACF,CAAC,CAAC,OAAOY,KAAK,EAAE;IACf3B,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,GAAG,EAAE,cAAc;MAAEC,MAAM,EAAE,GAAG;MAAEC,IAAI,EAAEhB,SAAS,CAAC;IAAE,CAAC,CAAC;IAC7EM,IAAI,CAAC0B,KAAK,CAAC;EACZ;AACD,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"acc44c8019d6b7018c85278240143f964902bf82","contentHash":"0f5e5c72a750de1c179b3195f25bf60f2d6113efe2f6214583e2409bf8f33672"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\get\\One.controller.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\get\\One.controller.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":10,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","PARAMS","id","number","required"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\get\\","sources":["One.controller.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.PARAMS]: {\r\n\t\tid: Joi.number().required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,MAAM,GAAG;IAClBC,EAAE,EAAEL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC;EAC3B;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e3f744677350016e0f3398f26a499319ac9bb553","contentHash":"614c3b33b330df7502bc68fde4e04a1e1fe61efe2bd67663821b4d55cdf7bfec"},"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\delete\\order-delete.validator.js":{"path":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\delete\\order-delete.validator.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":10,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["celebrate","Segments","Joi","require","module","exports","PARAMS","id","number","required"],"sourceRoot":"C:\\Users\\bruno\\OneDrive\\Desktop\\intern\\pizza-n\\intern-pizza\\src\\validators\\delete\\","sources":["order-delete.validator.js"],"sourcesContent":["const { celebrate, Segments, Joi } = require('celebrate');\r\n\r\nmodule.exports = celebrate({\r\n\t[Segments.PARAMS]: {\r\n\t\tid:Joi.number().required(),\r\n\t},\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,QAAQ;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGL,SAAS,CAAC;EAC1B,CAACC,QAAQ,CAACK,MAAM,GAAG;IAClBC,EAAE,EAACL,GAAG,CAACM,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC;EAC1B;AACD,CAAC,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"02b7a399fdeda524f74ad44ed1f8f13f1655f961","contentHash":"bca4adccb796c6a8d45dd40c24e598a270eb7cb690a704669240f28c873340c4"}}